<!doctype html>
<html lang="en">
  <!--

    File        : templates/jmdict.html
    Maintainer  : Felix C. Stegerman <flx@obfusk.net>
    Date        : 2020-06-18

    Copyright   : Copyright (C) 2020  Felix C. Stegerman
    Version     : v0.0.1
    License     : AGPLv3+

  -->
  <head>
    {% include "_meta.html" %}
    <title>jiten - jmdict</title>
  </head>
  <body>
    {% import "_search.html" as search %}
    {% include "_nav.html" %}
    <div class="container">
      {{ search.jmdict(LANGS, langs, query) }}
      {% if query %}
        {% for e, rank in results %}
          <br/>
          <div class="card">
            <div class="card-body">
              <ul class="list-group jap">
                <li class="list-group-item {{
                      "pb-1 px-2 pt-2" if e.kanji else "p-2"
                    }}" title="kanji">
                  {% if e.kanji %}
                    {% for k in e.kanji %}
                      <span class="selbtn fakebtn btn btn-lg btn-warning p-1 mb-1">
                        {% for c in k.elem -%}
                          {% if isideo(c) -%}
                            <a class="text-reset"
                              href="/kanji?query={{ c }}">{{ c }}</a>
                          {%- else -%}
                            {{ c }}
                          {%- endif %}
                        {%- endfor %}
                      </span>
                    {% endfor %}
                  {% else %}
                    <span class="text-muted">no kanji</span>
                  {% endif %}
                </li>
                <li class="list-group-item {{
                      "pb-1 px-2 pt-2" if e.reading else "p-2"
                    }}" title="reading">
                  {% if e.reading %}
                    {% for r in e.reading %}
                      <a class="selbtn btn btn-success p-1 mb-1"
                        href="/jmdict?query={{ r.elem }}&word=yes">{{ r.elem }}</a>
                    {% endfor %}
                  {% else %}
                    <span class="text-muted">no readings</span>
                  {% endif %}
                </li>
              </ul>
              {% set gloss, info = e.gloss_pos_info(langs) %}
              {% for l in langs %}
                <br/>
                <h4>{{ l }}</h4>
                <ul class="list-group my-1" title="meanings">
                  {% for g in gloss[l] %}
                    <li class="list-group-item pb-1 px-2 pt-2">
                      {% for x in g %}
                        <span class="selbtn fakebtn btn btn-outline-primary text-reset p-1 mb-1">
                          {{ x }}
                        </span>
                      {% endfor %}
                    </li>
                  {% endfor %}
                </ul>
              {% endfor %}
              <div class="p-1" title="miscellaneous">
                {% if info %}
                  {% for i in info %}
                    <span class="badge badge-success wsp-normal">
                      {{ i }}
                    </span>
                  {% endfor %}
                  <br/>
                {% endif %}
                <span class="nowrap">
                  seq#
                  <span class="badge badge-primary">
                    {{ e.seq }}
                  </span>
                </span>
                {% if rank %}
                  <span class="nowrap">
                    Â» freq#
                    <span class="badge badge-info">
                      {{ rank }}
                    </span>
                  </span>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
    {% include "_footer.html" %}
  </body>
</html>
